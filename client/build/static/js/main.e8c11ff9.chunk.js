(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),o=a.n(c),i=(a(12),a(1)),l="ws://".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_ENDPOINT||"192.168.0.55",":8080"),s=("http://".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_ENDPOINT||"192.168.0.55",":8080"),a(13),r.a.memo((function(e){var t=e.state,a=void 0===t?0:t;return r.a.createElement("div",{className:"batteryContainer"},r.a.createElement("div",{className:"batteryOuter"},r.a.createElement("div",{id:"batteryLevel",style:{width:"".concat(100*a/4,"px")}})),r.a.createElement("div",{className:"batteryBump"}),r.a.createElement("span",null,100*a,"%"))}))),u=a(2),d=a.n(u),m=a(5),E=a(6),f=a.n(E),p=function(e){var t=e.data,a=e.title,c=e.endpoint,o=Object(n.useState)(void 0),l=Object(i.a)(o,2),s=l[0],u=l[1],E=Object(n.useState)(!1),p=Object(i.a)(E,2),v=p[0],b=p[1],h=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=3;break}return e.next=3,fetch("http://192.168.0.55:8080/".concat(c)).then((function(e){return e.json()})).then((function(e){return e.map((function(e){return e.value}))})).then((function(e){b(!0),u(e)}));case 3:if(!s||!v){e.next=6;break}return b(!1),e.abrupt("return");case 6:b(!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"data-container"},r.a.createElement("h2",{className:"data-container__title"},a),t.map((function(e,t){return r.a.createElement("div",{className:"data-container__data",key:t},r.a.createElement("p",null,e.label),r.a.createElement("p",null,e.value,r.a.createElement("span",{className:"data-container__data__suffix"},function(e){var t=e.toLowerCase();return t.includes("voltage")?"V":t.includes("power")?"W":t.includes("current")?"A":t.includes("generated")?"kW/h":void 0}(e.label))))})),r.a.createElement("button",{className:"data-container__button",onClick:h},v?"Hide":"Show"," data chart"),v&&r.a.createElement(f.a,{type:"line",series:[{name:a,data:s}],options:{chart:{height:350,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}}}}))},v=(a(19),function(){var e=Object(n.useState)({solarData:[],batteryData:[],generationStats:[]}),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useRef)(null);Object(n.useEffect)((function(){try{o.current=new WebSocket(l)}catch(e){console.log(e)}return o.current.onopen=function(){console.log("websocket opened")},o.current.onmessage=function(t){try{c(JSON.parse(t.data))}catch(e){console.log(e)}},function(){console.log("closing socket"),o.current.close()}}),[]);return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"header"},r.a.createElement("p",null,"EP Solar - Pi"),r.a.createElement(s,{state:function(){var e=a.batteryData.find((function(e){return"Battery SOC"===e.label}));return e?e.value:0}()})),r.a.createElement("div",{className:"container"},r.a.createElement(p,{title:"Solar",data:a.solarData,endpoint:"solar"}),r.a.createElement(p,{title:"Battery",data:a.batteryData,endpoint:"battery"}),r.a.createElement(p,{title:"Generation Stats",data:a.generationStats})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,a){e.exports=a(20)}},[[7,1,2]]]);
//# sourceMappingURL=main.e8c11ff9.chunk.js.map